---
layout: post
status: publish
published: true
title: vim中执行shell命令的几个技巧
author:
  display_name: amutu
  login: amutu
  email: zhao6014@gmail.com
  url: ''
author_login: amutu
author_email: zhao6014@gmail.com
wordpress_id: 145
wordpress_url: http://amutu.com/blog/?p=145
date: '2013-03-23 10:46:32 +0800'
date_gmt: '2013-03-23 02:46:32 +0800'
categories:
- linux
- freebsd
tags: []
comments:
- id: 111
  author: samuel
  author_email: yourmail@gmail.com
  author_url: http://groups.tianya.cn/tribe/showArticle.jsp?groupId=551332&amp;articleId=ce0926b7e6aa45615d38fbb471b047a0
  date: '2013-04-08 23:07:53 +0800'
  date_gmt: '2013-04-08 15:07:53 +0800'
  content: "这个必须赞一个！"
---
<h1>:!command</h1></p>
<h2>功能</h2></p>
<h1><span style="font-size: 16px;">不退出vim，并执行shell命令command，将命令输出显示在vim的命令区域，不会改变当前编辑的文件的内容。</span></h1></p>
<h2>举例</h2><br />
:!ls -l</p>
<p>特别的可以运行:!bash来启动一个bash shell并执行命令，不需要退出vim。</p>
<h1>:r !command</h1></p>
<h2>功能</h2><br />
将shell命令command的结果插入到当前行的下一行。</p>
<h2>举例</h2><br />
:r !date</p>
<p>读取系统时间并插入到当前行的下一行。</p>
<h1>:起始行号,结束行号 !command</h1></p>
<h2>功能</h2><br />
将起始行号和结束行号指定的范围中的内容输入到shell命令command处理，并将处理结果替换起始行号和结束行号指定的范围中的内容。</p>
<h2>举例</h2><br />
:62,72 !sort</p>
<p>将62行到72行的内容进行排序。<br />
可以只指定起始行，例如:62 !tr [a-z] [A-Z]，将62行的小写字母转为大写字母<br />
当前光标所在行，除可以指定行号外，也可以用.表示，例如:. !tr [a-z] [A-Z]，将当前行的小写转为大写。</p>
<h1>:起始行号,结束行号 w !command</h1></p>
<h2>功能</h2><br />
将起始行号和结束行号所指定的范围的内容作为命令command的输入。不会改变当前编辑的文件的内容。</p>
<h2>举例</h2><br />
:62,72 w !sort</p>
<p>将62行到72行的内容进行排序，但排序的结果并不会直接输出到当前编辑的文件中，而是显示在vim敲命令的区域。</p>
<p>:62 w !bash</p>
<p>将会把第62行的内容作为bash命令来执行并显示结果，而且不会改变当前编辑的文件的内容。</p>
<p>:. w !bash</p>
<p>将当前行的内容作为bash命令来执行。<br />
例如52行内容为ls -l<br />
那么输入:52 w !bash就跟执行!ls -l是一样的效果，如果你用的shell是bash shell<br />
如果输入的是:52 !bash，那么会把第52行的内容也就是ls -l作为命令执行，同时命令的输出结果会替换第52行的内容，注意其中的区别。</p>
<div></div></p>
